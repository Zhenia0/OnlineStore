function cov_262ehw3q9i(){var path="C:\\Users\\Lenovo\\Desktop\\CourseWork\\server\\middleware\\authMiddleware.js";var hash="6c6f02e23a36313bc1a1087ab33bb2f9af13549e";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"C:\\Users\\Lenovo\\Desktop\\CourseWork\\server\\middleware\\authMiddleware.js",statementMap:{"0":{start:{line:1,column:12},end:{line:1,column:35}},"1":{start:{line:3,column:0},end:{line:18,column:2}},"2":{start:{line:4,column:4},end:{line:6,column:5}},"3":{start:{line:5,column:8},end:{line:5,column:14}},"4":{start:{line:7,column:4},end:{line:17,column:5}},"5":{start:{line:8,column:22},end:{line:8,column:61}},"6":{start:{line:9,column:8},end:{line:11,column:9}},"7":{start:{line:10,column:12},end:{line:10,column:68}},"8":{start:{line:12,column:24},end:{line:12,column:65}},"9":{start:{line:13,column:8},end:{line:13,column:26}},"10":{start:{line:14,column:8},end:{line:14,column:14}},"11":{start:{line:16,column:8},end:{line:16,column:57}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:3,column:17},end:{line:3,column:18}},loc:{start:{line:3,column:42},end:{line:18,column:1}},line:3}},branchMap:{"0":{loc:{start:{line:4,column:4},end:{line:6,column:5}},type:"if",locations:[{start:{line:4,column:4},end:{line:6,column:5}},{start:{line:4,column:4},end:{line:6,column:5}}],line:4},"1":{loc:{start:{line:9,column:8},end:{line:11,column:9}},type:"if",locations:[{start:{line:9,column:8},end:{line:11,column:9}},{start:{line:9,column:8},end:{line:11,column:9}}],line:9}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0},f:{"0":0},b:{"0":[0,0],"1":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"6c6f02e23a36313bc1a1087ab33bb2f9af13549e"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_262ehw3q9i=function(){return actualCoverage;};}return actualCoverage;}cov_262ehw3q9i();const jwt=(cov_262ehw3q9i().s[0]++,require('jsonwebtoken'));cov_262ehw3q9i().s[1]++;module.exports=function(req,res,next){cov_262ehw3q9i().f[0]++;cov_262ehw3q9i().s[2]++;if(req.method==="OPTIONS"){cov_262ehw3q9i().b[0][0]++;cov_262ehw3q9i().s[3]++;next();}else{cov_262ehw3q9i().b[0][1]++;}cov_262ehw3q9i().s[4]++;try{const token=(cov_262ehw3q9i().s[5]++,req.headers.authorization.split(' ')[1]);//Bearer asashfjkgaj
cov_262ehw3q9i().s[6]++;if(!token){cov_262ehw3q9i().b[1][0]++;cov_262ehw3q9i().s[7]++;return res.status(401).json({message:"Не авторизован"});}else{cov_262ehw3q9i().b[1][1]++;}const decoded=(cov_262ehw3q9i().s[8]++,jwt.verify(token,process.env.SECRET_KEY));cov_262ehw3q9i().s[9]++;req.user=decoded;cov_262ehw3q9i().s[10]++;next();}catch(e){cov_262ehw3q9i().s[11]++;res.status(401).json({message:"Не авторизован"});}};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImF1dGhNaWRkbGV3YXJlLmpzIl0sIm5hbWVzIjpbImp3dCIsInJlcXVpcmUiLCJtb2R1bGUiLCJleHBvcnRzIiwicmVxIiwicmVzIiwibmV4dCIsIm1ldGhvZCIsInRva2VuIiwiaGVhZGVycyIsImF1dGhvcml6YXRpb24iLCJzcGxpdCIsInN0YXR1cyIsImpzb24iLCJtZXNzYWdlIiwiZGVjb2RlZCIsInZlcmlmeSIsInByb2Nlc3MiLCJlbnYiLCJTRUNSRVRfS0VZIiwidXNlciIsImUiXSwibWFwcGluZ3MiOiJtM0RBZVk7MkZBZlosS0FBTUEsQ0FBQUEsR0FBRywwQkFBR0MsT0FBTyxDQUFDLGNBQUQsQ0FBVixDQUFULEMsd0JBRUFDLE1BQU0sQ0FBQ0MsT0FBUCxDQUFpQixTQUFVQyxHQUFWLENBQWVDLEdBQWYsQ0FBb0JDLElBQXBCLENBQXlCLGlEQUN0QyxHQUFHRixHQUFHLENBQUNHLE1BQUosR0FBZSxTQUFsQixDQUE0QixvREFDeEJELElBQUksR0FDUCxDQUZELGlDQURzQyx3QkFJdEMsR0FBRyxDQUNDLEtBQU1FLENBQUFBLEtBQUssMEJBQUdKLEdBQUcsQ0FBQ0ssT0FBSixDQUFZQyxhQUFaLENBQTBCQyxLQUExQixDQUFnQyxHQUFoQyxFQUFxQyxDQUFyQyxDQUFILENBQVgsQ0FBc0Q7QUFEdkQsd0JBRUMsR0FBRyxDQUFDSCxLQUFKLENBQVUsb0RBQ04sTUFBT0gsQ0FBQUEsR0FBRyxDQUFDTyxNQUFKLENBQVcsR0FBWCxFQUFnQkMsSUFBaEIsQ0FBcUIsQ0FBQ0MsT0FBTyxDQUFFLGdCQUFWLENBQXJCLENBQVAsQ0FDSCxDQUZELGlDQUdBLEtBQU1DLENBQUFBLE9BQU8sMEJBQUdmLEdBQUcsQ0FBQ2dCLE1BQUosQ0FBV1IsS0FBWCxDQUFrQlMsT0FBTyxDQUFDQyxHQUFSLENBQVlDLFVBQTlCLENBQUgsQ0FBYixDQUxELHdCQU1DZixHQUFHLENBQUNnQixJQUFKLENBQVdMLE9BQVgsQ0FORCx5QkFPQ1QsSUFBSSxHQUNQLE9BQU9lLENBQVAsQ0FBUywwQkFDTmhCLEdBQUcsQ0FBQ08sTUFBSixDQUFXLEdBQVgsRUFBZ0JDLElBQWhCLENBQXFCLENBQUNDLE9BQU8sQ0FBRSxnQkFBVixDQUFyQixFQUNILENBQ0osQ0FmRCIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IGp3dCA9IHJlcXVpcmUoJ2pzb253ZWJ0b2tlbicpXHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChyZXEsIHJlcywgbmV4dCl7XHJcbiAgICBpZihyZXEubWV0aG9kID09PSBcIk9QVElPTlNcIil7XHJcbiAgICAgICAgbmV4dCgpXHJcbiAgICB9XHJcbiAgICB0cnl7XHJcbiAgICAgICAgY29uc3QgdG9rZW4gPSByZXEuaGVhZGVycy5hdXRob3JpemF0aW9uLnNwbGl0KCcgJylbMV0gLy9CZWFyZXIgYXNhc2hmamtnYWpcclxuICAgICAgICBpZighdG9rZW4pe1xyXG4gICAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDEpLmpzb24oe21lc3NhZ2U6IFwi0J3QtSDQsNCy0YLQvtGA0LjQt9C+0LLQsNC9XCJ9KVxyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBkZWNvZGVkID0gand0LnZlcmlmeSh0b2tlbiwgcHJvY2Vzcy5lbnYuU0VDUkVUX0tFWSlcclxuICAgICAgICByZXEudXNlciA9IGRlY29kZWRcclxuICAgICAgICBuZXh0KClcclxuICAgIH1jYXRjaCAoZSl7XHJcbiAgICAgICAgcmVzLnN0YXR1cyg0MDEpLmpzb24oe21lc3NhZ2U6IFwi0J3QtSDQsNCy0YLQvtGA0LjQt9C+0LLQsNC9XCJ9KVxyXG4gICAgfVxyXG59OyJdfQ==